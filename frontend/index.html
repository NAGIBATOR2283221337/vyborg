<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обработка отчётов</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Система обработки отчётов</h1>
        <p>Автоматизация заполнения отчётов по сеткам вещания</p>
    </header>

    <main>
        <div class="container">
            <!-- Универсальная форма обработки -->
            <div class="card unified">
                <h2>Обработка отчётов</h2>

                <form id="unifiedForm" enctype="multipart/form-data">
                    <!-- Выбор типа отчёта -->
                    <div class="param-item">
                        <label for="report_type">Тип отчёта:</label>
                        <select id="report_type" name="report_type" required>
                            <option value="rus">Российский отчёт</option>
                            <option value="foreign">Иностранный отчёт</option>
                            <option value="third">Третий отчёт (заглушка)</option>
                        </select>
                    </div>

                    <p id="type_description" class="type-description">
                        Обработка отчёта с колонкой "Наименование аудиовизуального произведения"
                    </p>

                    <!-- Файлы -->
                    <div class="file-group">
                        <label for="schedule_file">Файл сетки:</label>
                        <input type="file" id="schedule_file" name="schedule_file" accept=".xls,.xlsx" required>
                    </div>

                    <div class="file-group">
                        <label for="report_file">Файл отчёта:</label>
                        <input type="file" id="report_file" name="report_file" accept=".xls,.xlsx" required>
                    </div>

                    <!-- Параметры обработки -->
                    <div class="params-group">
                        <h3>Параметры обработки</h3>

                        <div class="param-item">
                            <label for="max_shows">Максимальное количество показов:</label>
                            <input type="number" id="max_shows" name="max_shows" value="3" min="1" max="10">
                        </div>

                        <div class="param-item">
                            <label for="fuzzy_cutoff">Порог нечёткого поиска:</label>
                            <input type="range" id="fuzzy_cutoff" name="fuzzy_cutoff"
                                   value="0.70" min="0" max="1" step="0.01">
                            <span id="fuzzy_value">0.70</span>
                        </div>

                        <div class="param-item">
                            <label for="token_overlap">Минимальное пересечение токенов:</label>
                            <input type="range" id="token_overlap" name="min_token_overlap"
                                   value="0.50" min="0" max="1" step="0.01">
                            <span id="token_value">0.50</span>
                        </div>

                        <div class="param-item checkbox-item">
                            <input type="checkbox" id="delete_unmatched" name="delete_unmatched">
                            <label for="delete_unmatched">Удалять несовпадающие строки</label>
                        </div>
                    </div>

                    <button type="submit" class="btn-process">Обработать отчёт</button>
                </form>

                <div id="progress" class="progress" style="display: none;">
                    <div class="progress-bar"></div>
                    <span>Обработка...</span>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Система обработки отчётов. Все права защищены.</p>
    </footer>

    <script src="app.js"></script>
</body>
</html>
